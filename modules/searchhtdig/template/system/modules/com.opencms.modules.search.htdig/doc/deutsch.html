<?xml version="1.0" encoding="ISO-8859-1"?>
<xmltemplate>
<template> 
<html>
<head>
<title>Dokumentation Suchmodul Ht://Dig</title>
</head>
<body bgColor=#c0c0c0>
<h1 align=center><font color=blue>Suchmodul Ht://Dig</font></h1>
<h3><u>Allgemein:</u></h3>
<p align=justify>Das Suchmodul Htdig beinhaltet nur Klassen. Die zust&#228;ndige Klasse (Content Definition) leitet die Suchanfrage vom Aktionsmodul (Actionmodul) an Ht://Dig weiter und nimmt das Ergebnis entgegen. Diese Ergebnis wird dann ausgewertet und an das Aktionsmodul (Actionmodul) zur&#252;ckgesendet.<br><B>Wichtig</B> ist dass in den Moduleigenschaften (Ansicht: Adminstration -&gt; Modulverwaltung / Eigenschaften -&gt; Serverpath bearbeiten) der Serverpfad angegeben wird in dem sich das Programm htsearch befindet. Das Programm htsearch muss im CGI - Verzeichnis des Webservers liegen, da es ansonsten nicht ausgef&#252;hrt werden kann.<br>Die nachfolgende Beschreibung bezieht sich auf die stable release Version 3.1.5.</p>
<hr noShade>

<h3><u>&#220;bersicht:</u></h3>
<ul type=disc>
<li><a href="#htdig">Was ist Ht:\\Dig</a> 
<li><a href="#daten">Daten</a> 
<ul type=circle>
<li><a href="#features">Features</a> 
<li><a href="#anforderung">Anforderung</a> 
<li><a href="#plattformen">Plattformen</a> </li></ul>
<li><a href="#installation">Installation</a> 
<ul type=circle>
<li><a href="#entpacken">Entpacken</a> 
<li><a href="#konf">Konfigurieren</a> 
<li><a href="#inst">Compilieren und Installieren</a> 
<li><a href="#verzeichnis">Verzeichnisbaum</a> 
<li><a href="#zusammenfassung">Zusammenfassung</a> </li></ul>
<li><a href="#konfiguration">Konfiguration</a> 
<li><a href="#anpassung_Htdig">Anpassung Ht://Dig</a> 
<li><a href="#anpassung_Modul">Anpassung Modul</a> </li></ul>
<hr noShade>
<a name=htdig>
<h3><u>Was ist Ht:\\Dig</u></h3></a>
<p align=justify>Ht://Dig ist eine Volltextsuchmaschine die von der San Diego State University entwickelt worden ist. Die Suchmaschine ist Open Source und frei erh&#228;ltlich unter <a href="http:\\www.htdig.org" target=new>www.htdig.org</a>. Das Anwendungsgebiet von Ht://Dig beschr&#228;nkt sich auf die Domain und das Intranet. Es soll nicht die leistungsf&#228;higen Internet Suchmaschinen von z.B.: Lycos, Infoseek, Google und AltaVista ersetzen.</p>
<hr noShade>
<a name=daten>
<h3><u>Daten</u></h3></a><a name=features>
<h4>Features</h4></a>
<ul type=square>
<li>Suche erfolgt &#252;ber Http Protokoll oder &#252;ber das Dateisystem 
<li>Boolesche Suche ist integriert 
<li>Suchergebnis ist konfigurierbar 
<li>Durchsuchung von HTML und Textdateien 
<li>Verwendung von Keywords in HTML wird unterst&#252;tzt 
<li>Gesch&#252;tzter Server kann durchsucht werden (&#252;ber Anmeldung) 
<li>Suchtiefe kann eingestellt werden (Linktiefe) 
<li>Suche in anderen Dateisystemen (daf&#252;r wird ein external Parser ben&#246;tigt) 
<li>Unterst&#252;tzt Robot Exclusion Standard 
<li>Klein und Gro&#223;schreibung wird bei der Suche nicht ber&#252;cksichtigt 
<li>Sortierung des Ergebnis ist m&#246;glich </li></ul><a name=anforderung>
<h4>Anforderung</h4></a>
<ul type=square>
<li>Unix / Linux System 
<li>C compiler 
<li>C++ compiler 
<li>libstdc++ </li></ul><a name=plattformen>
<h4>Plattformen</h4></a>Bis jetzt sind folgende Plattformen, auf denen Htdig l&#228;uft, getestet worden: 
<ul type=square>
<li>Sun Solaris 2.5 SPARC (using gcc/g++ 2.7.2) 
<li>Sun SunOS 4.1.4 SPARC (using gcc/gcc 2.7.0) 
<li>HP/UX a.09.01 (using gcc/g++ 2.6.0) 
<li>IRIX 5.3 
<li>Debian Linux 2.0 (using egcs 1.1b) 
<li>Red Hat Linux 6.1 </li></ul>Laut Berichten l&#228;uft Ht://Dig auch auf anderen Plattformen. 
<hr noShade>
<a name=installation>
<h3><u>Installation</u></h3></a>
<p>Die Installation gliedert sich in die Bereiche entpacken, konfigurieren und installieren auf. Der Bereich Verzeichnisbaum gibt den nach der Installation angelegten Verzeichnisbaum und die in ihm enthaltenen Dateien an. <a name=entpacken>
<h4>Entpacken</h4></a>
<p>Die Datei ht://dig-3.1.5 wird mit dem tar Befehl entpackt: <pre>tar xzf htdig-3.1.5.tar.gz</pre>Es wird ein neues Verzeichnis mit dem Name <B>htdig-3.1.5</B> angelegt. Hier sind alle Dateien von ht://dig zu finden. Sollte dies nicht funktionieren kann man es mit dem Befehl:<pre>gunzip -c htdig-3.1.5.tar.gz | tar xf -</pre>versuchen.
<p></p><a name=konf>
<h4>Konfigurieren</h4></a>
<p>In dem neuen Verzeichnis kann man nun das Konfigurationsprogramm (configure)<I><B># ./configure</I></B> starten. Dieses Programm &#252;berpr&#252;ft das System und konfiguriert die Makefiles. Mit Hilfe der Option <pre>./configure --help</pre>werden alle Optionen anzeigt. Wird keine Option dem Programm configure mitgegeben werden die Standardangaben verwendet. Mit der Option <pre>./configure --prefix=</pre>wird das Installationsverzeichnis angegeben. Die folgende Liste beinhaltet die relevantesten Optionen: 
<dl>
<dt><tt>BIN_DIR</tt> 
<dd>Verzeichnis in der alle ausf&#252;hrbaren Programm installiert werden. 
<dd>--bindir= 
<dt><tt>CGIBIN_DIR</tt> 
<dd>Verzeichnis in dem der HTTP Server, CGI Programme sucht. Hierhin wird auch htsearch installiert. 
<dd>--with-cgi-bin-dir= 
<dt><tt>IMAGE_DIR</tt> 
<dd>Verzeichnis in dem die Bilder f&#252;r das Suchformular installiert werden. 
<dd>--with-image-dir= 
<dt><tt>SEARCH_DIR</tt> 
<dd>Verzeichnis in dem die Suchformular installiert wird. 
<dd>--with-search-dir= </dd></dl>Bei mehreren Optionen werden diese alle hintereinander an den Programmaufruf angeh&#228;ngt.Beispiel: <pre>./configure --prefix=/usr/test --with-cgi-bin-dir=/mytestserver.de/cgi-bin</pre><a name=inst>
<h4>Kompilieren und Installieren</h4></a>Vor der Installation m&#252;ssen erst die Makefiles&nbsp;erstellt (kompilieren) werden dies wird durch den Befehl <pre>make</pre>erreicht. Zum starten der Installation wird der Befehl: <pre>make install</pre>benutzt. Nun wird versucht die in der Konfiguration erstellten Verzeichnisse und Pfade zu erzeugen. Wichtig ist, dass keine Dateien &#252;berschrieben werden, dass gilt auch f&#252;r alte ht://dig Dateien !!! <a name=verzeichnis>
<h4>Verzeichnisbaum</h4></a>Nachdem die Installation gl&#252;cklich abgeschlossen wurde sollte man folgende Verzeichnisse im Installationspfad vorfinden.<br>
<table border=1>

<tr>
<th>Verzeichnis</th>
<th>Beschreibung</th></tr>
<tr>
<td>bin</td>
<td>Hier befinden sich alle ausf&#252;hrbaren Programme (htdig, htmerge, htfuzzy, rundig, ...).</td></tr>
<tr>
<td>conf</td>
<td>Hier liegt die Konfigurationsdatei htdig.conf.</td></tr>
<tr>
<td>htdocs</td>
<td>In diesem Verzeichnis befindet sich die Startseite f&#252;r die Suche (search.html) sowie deren Bilder.</td></tr>
<tr>
<td>common</td>
<td>Templates f&#252;r die Ausgabe (header.html, footer.html, long.html, short.html), sowie das verwendete W&#246;rterbuch.</td></tr>
<tr>
<td>db</td>
<td>Hier befindet sich die Datenbank.</td></tr></table>
<p>In dem Verzeichnis /cgi-bin des Webserver sollte sich nun auch das Programm htsearch befinden. Die im Verzeichnis /bin aufgef&#252;hrten Programme werden nun kurz erl&#228;utert:</p>
<h4>- htdig</h4>
<p>Das Programm htdig ist der eigentliche Suchroboter (oder Crawler, Spider, usw.) der die angegebene Webseite durchsucht. Die HTML-Dokumente werden &#252;ber das HTTP Protokoll &#252;bertragen und in einer Datenbank gespeichert. Diese Datenbank wird zuvor von htdig erstellt.<br>N&#252;tzliche Optionen f&#252;r htdig: </p>
<dl compact>
<dt>-s 
<dd>Gibt eine Statistik nach dem Suchlauf aus. 
<dt>-c <I>configfile</I> 
<dd>Diese Konfigurationsdatei wird statt der Standardkonfiguration genommen. 
<dt>-t 
<dd>Erzeugt eine ASCII Version der Datenbank. 
<dt>-v 
<dd>Komplette Ausgabe der Arbeitsweise von htdig (gut geeignet zur Fehlersuche). </dd></dl>Anweisung: <B><I>#./htdig</I></B> (ohne Parameter), <B><I>#./htdig -s</I></B> (Ausgabe mit Statistik). 
<h4>- htmerge</h4>
<p>Htmerge ist der Datenbankmanager. Die von htdig erstellte Datenbank wird indiziert und in einer neuen Datenbank gespeichert. Diese Datenbank ist dann f&#252;r das Suchprogramm htsearch geeignet.</p>Optionen f&#252;r htmerge: 
<dl compact>
<dt>-s 
<dd>Gibt eine Statistik der Indizierung aus. </dd></dl>Anweisung: <B><I>#./htmerge</B></I> (ohne Parameter), <B><I>#./htmerge -s</I></B>(Ausgabe mit Statistik). 
<h4>- rundig</h4>
<p>Das Programm rundig ist im Grunde kein separates Programm sondern es f&#252;hrt nacheinander die Programme htdig und htmerge aus. Um die Arbeitsweise von rundig verfolgen zu k&#246;nnen kann man als Option -vvv eingeben womit alle Aktionen am Bildschirm angezeigt werden.<br>Anweisung: <B><I>#./rundig</I></B> (ohne Parameter), <B><I>#./rundig -vvv</I></B> (Ausgabe Aktionen zur Laufzeit). </p>
<h4>- htfuzzy</h4>
<p>Htfuzzy generiert Indizies f&#252;r die unscharfe(fuzzy) Suche.</p>
<dl compact>
<dt>-c <I>configfile</I> 
<dd>Benutzt die angegebene Konfigurationsdatei. 
<dt>-v 
<dd>Ausf&#252;hrlich Ausgabe. 
<dt>-Algorithmen: 
<dd><B>soundex</B> 
<dd><B>metaphone</B> 
<dd><B>endings</B> 
<dd><B>synonyms</B> </dd></dl>Anweisung: <B>./htfuzzy</B> <I>[-c configfile][-v]</I> <I>algorithm ...</I> 
<h4>- htsearch</h4>
<p>Das Programm htsearch wird durch die Methode GET oder POST (in der search.html Seite) aufgerufen. Es durchsucht die Datenbank, die von htmerge erstellt wurde, nach dem Suchbegriff und gibt eine dementsprechende Meldung aus. Wichtig hierbei ist das htsearch im cgi-bin Verzeichnis&nbsp;des Webservers steht!</p><br><a name=#zusammenfassung>
<h3><u>Zusammenfassung</u></h3></a>Kurze Zusammenfassung f&#252;r die schrittweise Installation: 
<ol>
<li>tar xzf htdig-3.1.5.tar.gz oder gunzip -c htdig-3.1.5.tar.gz | tar xf - 
<li>./configure [option] 
<li>./make 
<li>./make install </li></ol>
<hr noShade>
<a name=konfiguration>
<h3><u>Konfiguration</u></h3></a>
<p>Die Konfiguration von Ht://Dig bezieht sich auf die Konfigurationsdatei <B>htdig.conf</B>, mit dieser Konfigurationsdatei arbeiten alle Programme. Zum Testen empfiehlt es sich direkt nach der Installation das Programm rundig auszuf&#252;hren. Es wird dann die Standardkonfiguration von htdig.conf genommen und die Website www.htdig.org durchsucht und indiziert. Jetzt kann man zum testen im Browser die search.html Seite aufrufen und einen Suchbegriff eingeben. <br>Im folgenden Abschnitt wird die aktuell verwendete Konfiguration von htdig.conf erl&#228;utert. Danach werden noch einige Parameter f&#252;r htdig.conf beschrieben. Im Anhang befindet sich der komplette Ausdruck der aktuellen Konfiguration.</p>
<h4><u>Beschreibung von htdig.conf</u></h4>
<p>Die in Klammern stehenden Werte sind Standardeinstellungen von htdig.</p>
<h4>Datenbankpfad</h4>
<p>database_dir: /usr/my/path/htdig<br>(database_dir: /opt/www/htdig/db)<br>Angabe des Pfades wo die Datenbank liegt bzw. wo sie erstellt werden soll.<br></p>
<h4>Startseite</h4>
<p>start_url: http://myserver/<br>(start_url: http://www.htdig.org/)<br>Angabe der Startseite in der htdig anfangen soll Daten zu sammeln.<br></p>
<h4>Begrenzung</h4>
<p>Standard: limit_urls_to: ${start_url}<br>Hier wird angegeben in welchem Bereich der robot suchen soll (linktiefe). Bei der Standardangabe (${start_url}) wird nur im Bereich der Startseite gesucht, d.h. alle Links die auf andere Server verweisen werden nicht nachgegangen. Die aktuelle Begrenzung sagt aus das alle Seiten der Domain durchsucht werden sollen. </p>
<h4>Dynamische Webseiten</h4>
<p>remove_default_doc:<br>Um die Index-Seite erfassen zu k&#246;nnen wird diese Angabe ben&#246;tigt, sie folgt gleich hinter der limit_urls_to Anweisung. Dies gilt nur f&#252;r dynamisch erzeugte Webseiten. F&#252;r Statische Webseiten wird diese Option nicht ben&#246;tigt. </p>
<h4>Ausnahme</h4>exclude_urls: /cgi-bin/ .cgi<br>Hier wird angegeben welche Daten nicht vom robot in die Datenbank aufgenommen werden soll.<br>bad_extensions: .wav .gz .z .sit .au .zip .tar .hqx .exe .com .gif .jpg .jpeg .aiff .class .map .ram .tgz .bin .rpm .mpg .mov .avi<br>Da nicht alle Datenformate verstanden werden wird hier angegeben welche Formate w&#228;hrend der Indizierung ignoriert werden.<br>
<p></p>
<h4>Wartung</h4>maintainer: myname@myaddress<br>(maintainer: unconfigured@htdig.searchengine.maintainer)<br>Wenn ein Fehler auftritt kann eine Nachricht an diese E-Mailadresse geschrieben werden. 
<p></p>
<h4>Gr&#246;&#223;enordnung</h4>
<p>max_head_length: 50000<br>(max_head_length: 10000)<br>max_doc_size: 200000<br>(max_doc_size: 100000)<br>Die erste Angabe bezieht sich auf den reinen Text der gespeichert werden soll. Der Vorschlag von htdig ist eine Gr&#246;&#223;e von 50,000 bytes anzugeben damit sollen 95 % aller Dokumente gespeichert werden. Die zweite Angabe bezieht sich auf die obere Begrenzung der Datenmenge, die f&#252;r Dokumente verwendet werden. </p>
<hr noShade>
<a name=anpassung_Htdig>
<h3><u>Anpassung Ht://dig</u></h3></a>
<p>Um nun mit Ht://Dig in OpenCms zu arbeiten m&#252;ssen noch bestimmte Dateien angepa&#223;t werden. Diese Dateien liegen alle im Verzeichnis common von Ht://Dig. </p>
<ul type=disc>
<li>header.html 
<li>footer.html 
<li>long.html 
</ul>
<p>Im folgenden wird nur das Aussehen der Dateien beschrieben, &#246;ffnen Sie bitte die dementsprechende Datei und l&#246;schen den Inhalt, danach f&#252;gen Sie bitte den hier dargestellten Inhalt in die Datei ein und fertig sind die Anpassungen.</p>
<h4>- header.html</h4>$(WORDS)<br>$(PAGES)<br>$(FIRSTDISPLAYED)<br>$(LASTDISPLAYED)<br>$(MATCHES)<br>
<h4>- footer.html</h4>
<p>Bitte nur den Inhalt l&#246;schen und nichts einf&#252;gen. Diese Datei ist leer (nicht die Datei l&#246;schen da sie trotzdem von noch htsearch verwendet wird). </p>
<h4>- long.html</h4>$(URL)<br>$(TITLE)<br>$(EXCERPT)<br>$(SIZE)<br>$(PERCENT)<br>
<h4>- nomatch.html</h4>nomatch 
<h4>- syntax.html</h4>syntax 
<hr noShade>
<a name=anpassung_Modul>
<h3><u>Anpassung Modul</u></h3></a>
<p>Als letztes wird das Modul angepasst. Hier muss nur eine Einstellung ge&#228;ndert werden, der <B>Serverpath</B>. Der Serverpath gibt an wo sich das Programm htsearch befindet. Diese &#196;nderung wird in den Eigenschaften des Moduls durchgef&#252;hrt (s.o.).</p>
</body>
</html>
</template>
</xmltemplate>