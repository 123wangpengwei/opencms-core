<?xml version="1.0" encoding="ISO-8859-1"?>
<xmltemplate>
<template> 
<html>
<head>
<title>Documentation of Ht://Dig Search Module</title>
</head>
<body bgColor=#c0c0c0>
<h1 align=center><FONT color=blue>Search Module Ht://Dig</FONT></h1>
<h3><u>General:</u></h3>
<p align=justify>The search module Htdig&nbsp;only contains classes. The competent class (Content Definition) directs the search query from the searchform module to Ht://Dig, and receives the result. After the result was evaluated by the competent class it is sent&nbsp;back to the searchform class. <br><B>Important</B> is a correct indication of the module property <B>Serverpath</B>. This property File sets the path of the htsearch program (e.g. the default is: http://opencms-test.ff.de/cgi-bin/htsearch). The program htsearch must be installed in the CGI - path of&nbsp;the Webserver otherwise it&nbsp;can not work.<br>This description relates to&nbsp;Version 3.1.5. </p>
<ul type=disc>
<li><a href="#htdig">What is Ht:\\Dig</a> 
<li><a href="#data">Data</a> 
<ul type=circle>
<li><a href="#feat">Features</a> 
<li><a href="#requirements">Requirements</a> 
<li><a href="#plattform">Plattforms</a> </li></ul>
<li><a href="#installation">Installation</a> 
<ul type=circle>
<li><a href="#extracting">Extracting</a> 
<li><a href="#configure">Configure</a> 
<li><a href="#compile">Compile and Install</a> 
<li><a href="#tree">Directory Tree</a> 
<li><a href="#summary">Summary</a> </li></ul>
<li><a href="#configuration">Configuration</a> 
<li><a href="#alignment_Htdig">Alignment of Ht://Dig</a> 
<li><a href="#alignment_Modul">Alignment of the module</a> </li></ul>
<hr noShade>
<a name=htdig>
<h3><u>What is Ht:\\Dig</u></h3></a>
<p align=justify>The ht://Dig system is a complete world wide web indexing and searching system for a domain or intranet. This system is not meant to replace the need for powerful internet-wide search systems like Lycos, Infoseek, Google and AltaVista. Instead it is meant to cover the search needs for a single company, campus, or even a particular sub section of a web site. As opposed to some WAIS-based or web-server based search engines, ht://Dig can easily span several web servers. The type of these different web servers doesn't matter as long as they understand common protocols like HTTP. ht://Dig was developed at San Diego State University as a way to search the various web servers on the campus network. <a href="http:\\www.htdig.org" target=new>www.htdig.org</a>.</p>
<hr noShade>
<a name=data>
<h3><u>Data</u></h3></a><a name=feat>
<h4>Features</h4></a>
<ul type=square>
<li>Searching of HTML and text files 
<li>Configurable search results 
<li>Boolean expression searching 
<li>The depth of the search can be limited 
<li>Keywords can be added to HTML documents 
<li>a Protected server can be indexed 
<li>Robot exclusion is supported 
<li>It is free </li></ul><a name=requirements>
<h4>Requirements</h4></a>
<ul type=square>
<li>Unix / Linux System 
<li>C compiler 
<li>C++ compiler </li></ul><a name=plattform>
<h4>Plattforms</h4></a>Unfortunately, I only have access to a couple of different Unix machines. ht://Dig has been tested on these machines: 
<ul type=square>
<li>Sun Solaris 2.5 SPARC (using gcc/g++ 2.7.2) 
<li>Sun SunOS 4.1.4 SPARC (using gcc/gcc 2.7.0) 
<li>HP/UX a.09.01 (using gcc/g++ 2.6.0) 
<li>IRIX 5.3 
<li>Debian Linux 2.0 (using egcs 1.1b) 
<li>Red Hat Linux 6.1 </li></ul>There are reports of ht://Dig working on a number of other platforms. 
<hr noShade>
<a name=installation>
<h3><u>Installation</u></h3></a>The installation subdivides itself into extracting, configuration und compiling. <a name=extracting>
<h4>Extracting</h4></a>
<p>The distribution of ht://Dig is in the form of a gzipped tar file. The name of the file will be something like htdig-3.1.0.tar.gz. To extract, you can use either the GNU tar command as follows: <pre>tar xzf htdig-3.2.0b2.tar.gz</pre>If you do not have GNU tar, you can do the following:<pre>gunzip -c htdig-3.2.0b2.tar.gz | tar xf -</pre>In either case, a new directory will be created under which the distribution will be extracted. The directory it creates will be htdig- followed by the version number. 
<p></p><a name=configure>
<h4>Configure</h4></a>
<p>Once the distribution has been extracted, change to the newly created directory. In this directory you will need execute the configure program: <I><B>#./configure</I></B> </p>
<p>This program will attempt to determine what your particular system can and can't do. The configure program may produce some warnings about libguile and guile. Ignore those warnings since they do not affect the ht://Dig program at all. After this, you may wish to edit the file CONFIG. There are several values which you need to change in this file. Note that more recent versions of ht://Dig (after 3.1.0b2) will allow you to use <pre>./configure --prefix=</pre>and <pre>--exec-prefix=</pre>to set the DEST and BIN_DIR variables automatically. As of the full 3.1.0 release, configure also supports setting the other directories in CONFIG using the flags --with-cgi-bin-dir=DIR, --with-image-dir=DIR and --with-search-dir=DIR. 
<p></p>
<dl>
<dt><tt>DEST</tt> 
<dd>This is where all of the ht://Dig parts will be installed. Various other variables will use this value as their base. 
<dt><tt>BIN_DIR</tt> 
<dd>All the ht://Dig executable programs will go here. 
<dt><tt>CONFIG_DIR</tt> 
<dd>Configuration files will be placed here. 
<dt><tt>COMMON_DIR</tt> 
<dd>This directory is for files which can be shared between different search databases. 
<dt><tt>DATABASE_DIR</tt> 
<dd>Set this to the directory where the search databases are going to be. (Make sure there is plenty of space on the partition you put this on!) 
<dt><tt>DEFAULT_CONFIG_FILE</tt> 
<dd>Point this to where all the tools will look for the configuration file. You can define this in terms of CONFIG_DIR if you'd like. 
<dt><tt>CGIBIN_DIR</tt> 
<dd>The directory where your HTTP server looks for CGI programs. This is where htsearch will get installed. 
<dt><tt>IMAGE_DIR</tt> 
<dd>Define this to be a place that can be accessed by your web server. This is where a couple of images will be installed. 
<dt><tt>IMAGE_URL_PREFIX</tt> 
<dd>This is the URL which points to the directory specified by the IMAGE_DIR variable above. </dd></dl><a name=compile>
<h4>Compile and Install</h4></a>
<p>It is important to note that the Makefiles created assume that you use a make program that knows how to deal with include <I>filename</I>. Once the distribution has been extracted, change to the newly created directory. In this directory you will need execute the configure program: </p>
<p>Now build the complete system with: <pre>make</pre>(Sit back and relax for a while...) 
<p></p>
<p>If the compilation failed with the error that it cannot find libht.a, the most likely problem is that your system does not have libstdc++ installed. Please check the system requirements for details on this. </p>
<p>Everything should have built at this point. To install the software, you need to execute <pre>make install</pre>
<p>This will perform several tasks. It will first attempt to create the directories that you specified in the CONFIG file. </p><a name=tree>
<h4>Directory Tree</h4></a>
<p>After a successful&nbsp;installation the following directories should be contained in the installation path. </p>
<table border=1>

<tr>
<th>Directory</th>
<th>Description</th></tr>
<tr>
<td>bin</td>
<td>This directory&nbsp;contains the executeable programs (htdig, htmerge, htfuzzy, rundig, ...)</td></tr>
<tr>
<td>conf</td>
<td>Configuration file htdig.conf</td></tr>
<tr>
<td></td>
<td></td></tr>
<tr>
<td></td>
<td></td></tr>
<tr>
<td>lib</td>
<td>Laberies for ht://Dig</td></tr>
<tr>
<td>common</td>
<td>Output templates (header.html, footer.html, long.html, short.html), and the dictionary which is used</td></tr>
<tr>
<td>db</td>
<td>Directory for the Database</td></tr></table>
<p>The program htsearch should now be included in the directory&nbsp;/cgi-bin of the webserver. This programs indicated in the directory&nbsp;/bin can be explained as follows:</p>
<h4>- htdig</h4>
<p>Htdig retrieves HTML documents using the HTTP protocol and gathers information from these documents which can later be used to search these documents. This program can be referred to as the search robot. Some useful options: </p>
<dl></dl>
<dl compact>
<dt>-s 
<dd>Print statistics about the dig after completion. 
<dt>-t 
<dd>Create an ASCII version of the document database. This database is easy to parse with other programs so that information can be extracted from it for purposes other than searching. One could gather some interesting statistics from this database. 
<dt>-v 
<dd>Verbose mode. This increases the verbosity of the program. Using more than 2 is probably only useful for debugging purposes. The default verbose mode (using only one -v) gives a nice progress report while digging. This progress report can be a bit cryptic, so here is a brief explanation. a line is shown for each URL, with 3 numbers before the URL and some symbols after the URL. The first number is the number of documents parsed so far, the second is the DocID for this document, and the third is the hop count of the document (number of hops from one of the start_url documents). After the URL, it shows a "*" for a link in the document that it already visited, a "+" for a new link it just queued, and a "-" for a link it rejected for any of a number of reasons. To find out what those reasons are, you need to run htdig with at least 3 -v options, i.e. -vvv. If there are no "*", "+" or "-" symbols after the URL, it doesn't mean the document was not parsed or was empty, but only that no links to other documents were found within it. With more verbose output, these symbols will get interspersed in several lines of debugging output. </dd></dl>
<p>Example: <B><I>./htdig</I></B> (without parameters) ; <B><I>./htdig -vvvst</I></B> (with parameters) </p>
<h4>- htmerge</h4>
<p>Htmerge is used to create a document index and word database from the files that were created by htdig. These databases are then used by htsearch to perform the actual searched.<B>Important</B> at the first time to work with htmerge check the access authority of the db.words.db_weakcmpr database. -s </p>
<dl compact>
<dd>Print statistics about the dig after completion. 
<dt>-v 
<dd>Run in verbose mode. This will provide some hints as to the progress of the merge. This can be useful when running htmerge interactively since some parts (especially the word database creation) can take a very long time. 
<dt>-d 
<dd>Prevent the document index from being created. </dd></dl>
<p>Example: <B><I>./htmerge</I></B> (without parameters) ; <B><I>./htmerge -s</I></B> (print statistic) 
<h4>- rundig</h4>
<p>This is only a script which are executed in rotation htdig and htmerge. You can use the same option for the odds programs. </p>
<h4>- htsearch</h4>
<p>Htsearch is the actual search engine of the ht://Dig search system. It is a CGI program that is expected to be invoked by an HTML form. It will accept both the GET and POST methods of passing data to the CGI program.</p><a name=summary>
<h4>Summary</h4></a>
<p>This is short installation guide:</p>
<ol>
<li>tar xzf htdig-3.1.5.tar.gz oder gunzip -c htdig-3.1.5.tar.gz | tar xf - 
<li>./configure [option] 
<li>./make 
<li>./make install </li></ol>
<hr noShade>
<a name=configuration>
<h3><u>Configuration</u></h3></a>
<p>All programs in the ht://Dig system (htdig, htmerge, htsearch, htfuzzy, and htnotify) use a flexible configuration file (standard htdig.conf). This configuration file is a plain ASCII text file. Each line in the file is either a comment or contains an attribute. Comment lines are blank lines or lines that start with a '#'. Attributes consist of a variable name and an associated value: </p>
<dl compact>
<dd><tt>&lt;name&gt;:&lt;whitespace&gt;&lt;value&gt;&lt;newline&gt;</tt> </dd></dl>
<p>The &lt;name&gt; contains any alphanumeric character or underline (_) The &lt;value&gt; can include any character except newline. It also cannot start with spaces or tabs since those are considered part of the whitespace after the colon. It is important to keep in mind that any trailing spaces or tabs will be included. </p>
<p>It is possible to split the &lt;value&gt; across several lines of the configuration file by ending each line with a backslash (\). The effect on the value is that a space is added where the line split occurs. </p>
<p>Each program only extracts the attributes it needs and hence it is most convenient to use the same configuration file with all ht://Dig programs. If an attribute is specified more than once in the file, only the last one will be used. </p>
<h4><u>Short Description of htdig.conf</u></h4>
<h4>Database path</h4>
<p>This is the directory which contains all database and other files related to ht://Dig. It is never used directly by any of the programs, but other attributes are defined in terms of this one. The default value of this attribute is determined at compile time.<br><I>(database_dir: /opt/www/htdig/db)</I></p>
<h4>Start page</h4>
<p>This is the list of URLs that will be used to start a dig when there was no existing database. Note that multiple URLs can be given here.<br><I>(start_url: http://www.htdig.org/)</I></p>
<h4>Limit</h4>
<p>This specifies a set of patterns that all URLs have to match against in order for them to be included in the search. Any number of strings can be specified, separated by spaces. If multiple patterns are given, at least one of the patterns has to match the URL. Matching is a case-insensitive string match on the URL to be used. The match will be performed after the relative references have been converted to a valid URL. This means that the URL will always start with http://. Granted, this is not the perfect way of doing this, but it is simple enough and it covers most cases.<br><I>(limit_urls_to: ${start_url})</I> </p>
<h4>Dynamic Website</h4>
<p>Set this to the default documents in a directory used by the servers you are indexing. These document names will be stripped off of URLs when they are normalized, if one of these names appears after the final slash, to translate URLs like http://foo.com/index.html into http://foo.com/ Note that you can disable stripping of these names during normalization by setting the list to an empty string. The list should only contain names that all servers you index recognize as default documents for directory URLs, as defined by the DirectoryIndex setting in Apache's srm.conf, for example.<br><I>(for dynamic Website you should set: remove_default_doc: )</I> </p>
<h4>Exclude</h4>
<p>If a URL contains any of the space separated patterns, it will be rejected. This is used to exclude such common things such as an infinite virtual web-tree which start with cgi-bin.<br><I>(exclude_urls: /cgi-bin/ .cgi)</I> </p>
<h4>Maintainer</h4>
<p>This should be the email address of the person in charge of the digging operation. This string is added to the user-agent: field when the digger sends a request to a server. </p>
<h4>Dimension</h4>
<p>For each document retrieved, the top of the document is stored. This attribute determines the size of this block. The text that will be stored is only the text; no markup is stored. We found that storing 50,000 bytes will store about 95% of all the documents completely. This really depends on how much storage is available and how much you want to show.<br><I>(e.g.: max_head_length: 50000)</I> </p>
<p>This is the upper limit to the amount of data retrieved for documents. This is mainly used to prevent unreasonable memory consumption since each document will be read into memory by htdig. <I>(e.g.: max_doc_size: 200000)</I> </p>For all possible configuration look at <a href="http://www.htdig.org/confindex.html">www.htdig.org</a> Website. 
<hr noShade>
<a name=alignment_Htdig>
<h3><u>Alignment of Ht://dig</u></h3></a>
<p>To work with Ht://Dig in Opencms certain files must be adapted. These Files are stored in the /share Directory of your Ht://Dig installation path.</p>
<ul type=cycle>
<li>header.html 
<li>footer.html 
<li>long.html 
</ul>
<p>Please open the files and delete their content. Then copy the following content atributes and save the files. That's it.</p>
<h4>- header.html</h4>$(WORDS)<br>$(PAGES)<br>$(FIRSTDISPLAYED)<br>$(LASTDISPLAYED)<br>$(MATCHES) 
<h4>- footer.html</h4>Please&nbsp;delete&nbsp;only the content of the file and not the file itself!! The file is empty but used by htsearch. 
<h4>- long.html</h4>$(URL)<br>$(TITLE)<br>$(EXCERPT)<br>$(SIZE)<br>$(PERCENT) 
<h4>- nomatch.html</h4>
<p>nomatch</p>
<h4>- syntax.html</h4>
<p>syntax</p><br>
<hr noShade>
<a name=alignment_Modul>
<h3><u>Alignment of the module</u></h3></a>
<p>At this point only one parameter has to be changed: the <strong>Serverpath</strong>. The <strong>Serverpath </strong>indicats where the htsearch program is stored. This change is made within the parameters of the module (see above).</p>
</body>
</html>
</template>
</xmltemplate>