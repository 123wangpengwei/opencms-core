<?xml version="1.0"?>
<WORKPLACE>

<TEMPLATE>
<![CDATA[
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<title>Matrix</title>
	
<script type="text/javascript" language="JavaScript" src="../templates/js/gigaMatrix/warp_layer.js"></script>
<script type="text/javascript" language="JavaScript" src="../templates/js/gigaMatrix/table.js"></script>
<script type="text/javascript" language="JavaScript" src="../templates/js/gigaMatrix/style_giga_context_menu.js"></script>
<script type="text/javascript" language="JavaScript" src="../templates/js/gigaMatrix/giga_context_menu.js"></script>
<script type="text/javascript" language="JavaScript" src="../templates/js/gigaMatrix/giga_site_matrix.js"></script>
<script type="text/javascript" language="JavaScript" src="../templates/js/opencms.js"></script>

<script language="JavaScript">

function editSite(id)
{
	top.head.location.href = "head.html?site=" + id.substring(1) + "&view=%2Fsystem%2Fworkplace%2Faction%2Fexplorer.html";
}
function editSiteConfig(id)
{
	location.href = "administration_content_siteedit.html?initial=true&siteid=" + id.substring(1);
}
function previewSite(id)
{
	openwinfull('http://' + nodeurls[id] + '/', 'preview', 0, 0);
}
function deleteSite(id)
{
	location.href = "administration_content_sitedelete.html?initial=true&siteid=" + id.substring(1);
}
function siteProperties(id)
{
	location.href = "administration_content_siteproperty.html?siteid=" + id.substring(1);
}


function initMatrix() {

	var sM = new siteMatrix(100, 60);
	
]]><process>domains</process><![CDATA[

]]><process>categories</process><![CDATA[

]]><process>sites</process><![CDATA[

	initContextMenus();
	
	sM.drawMatrix();
 // alert(sM.siteDomains[1]["domainId"])
}
var nodeurls = new Array();
	
</script>
<script language="JavaScript" type="text/javascript">


function initContextMenus() {


  
  cM = new gigaContextMenuCollection('cM'); // The name MUST also be passed as a parameter in the form of a string.
  cM2 = new gigaContextMenuCollection('cM2');
  
    /* Create ALL menus needed for operation now, important if you use branching 
  
     the first menu is the ROOT, from which it will close all it's menus again.
  */
  

  cM.addMenu('m001',165);
  cM2.addMenu('m001',165);

  
  cM.menus['m001'].addItem('i001',']]><LABEL value="sitemanagement.sitematrix.context.edit"/><![CDATA[','javascript:editSite(currSiteNodeId);');
  cM.menus['m001'].addItem('i002',']]><LABEL value="sitemanagement.sitematrix.context.editconf"/><![CDATA[','javascript:editSiteConfig(currSiteNodeId);');
  cM.menus['m001'].addItem('i003',']]><LABEL value="sitemanagement.sitematrix.context.preview"/><![CDATA[','javascript:previewSite(currSiteNodeId);');

  cM.menus['m001'].addItem('i004','---','');
  cM.menus['m001'].addItem('i005',']]><LABEL value="sitemanagement.sitematrix.context.delete"/><![CDATA[','javascript:deleteSite(currSiteNodeId);');
  cM.menus['m001'].addItem('i006','---','');
  cM.menus['m001'].addItem('i007',']]><LABEL value="sitemanagement.sitematrix.context.properties"/><![CDATA[','javascript:siteProperties(currSiteNodeId);');


  cM2.menus['m001'].addItem('i001',']]><LABEL value="sitemanagement.sitematrix.context.edit"/><![CDATA[','javascript:editSite(currSiteNodeId);');
  cM2.menus['m001'].addItem('i002',']]><LABEL value="sitemanagement.sitematrix.context.editconf"/><![CDATA[','javascript:editSiteConfig(currSiteNodeId);');
  cM2.menus['m001'].addItem('i003',']]><LABEL value="sitemanagement.sitematrix.context.preview"/><![CDATA[','javascript:previewSite(currSiteNodeId);');

  cM2.menus['m001'].addItem('i004','---','');
  cM2.menus['m001'].addItem('i005',']]><LABEL value="sitemanagement.sitematrix.context.delete"/><![CDATA[','javascript:deleteSite(currSiteNodeId);');
  cM2.menus['m001'].addItem('i006','---','');
  cM2.menus['m001'].addItem('i007',']]><LABEL value="sitemanagement.sitematrix.context.properties"/><![CDATA[','javascript:siteProperties(currSiteNodeId);');

   drawContextMenus();
  
}


var isAdmin = ]]><process>isadmin</process><![CDATA[;
var picsUrl = ']]><METHOD name="picsUrl"/><![CDATA[';

function drawContextMenus() {

   cM.menus['m001'].menuItems['i002'].ghosted = !isAdmin;
   cM.menus['m001'].menuItems['i005'].ghosted = !isAdmin;

   cM2.menus['m001'].menuItems['i002'].ghosted = !isAdmin;
   cM2.menus['m001'].menuItems['i005'].ghosted = !isAdmin;

  cM.menus['m001'].drawMenu();
  cM2.menus['m001'].drawMenu();

}
	
</script>
<link rel="stylesheet" type="text/css" href="../css/site_matrix.css">
</head>

<body onload="initMatrix();" alink="#00ff00" vlink="#000000" bgcolor="#ffffff">

    <!-- following line must be placed in the bottom of the body tag -->
	<script language="javAscript">if((navigator.appName == "Microsoft Internet Explorer")) {document.write('<div id="dpIE"></div>');} 

	// here comes the lame netscape fix
	// else { if(isNav) { for(i = 0; i < numOfNodes; i++) {document.write('<br>');}}}</script>
</body>
</html>
]]>
</TEMPLATE>


<domain>
<![CDATA[	sM.addSiteDomain('d]]><process>x</process><![CDATA[',']]><process>shortname</process><![CDATA[',']]><process>name</process><![CDATA[');
]]>
</domain>

<category>
<![CDATA[	sM.addSiteType('t]]><process>y</process><![CDATA[', ']]><process>name</process><![CDATA[');
]]>
</category>

<sitenode>
<![CDATA[	sM.addSiteNode('n]]><process>id</process><![CDATA[', ']]><process>name</process><![CDATA[', 'd]]><process>x</process><![CDATA[', 't]]><process>y</process><![CDATA[', true);
	nodeurls['n]]><process>id</process><![CDATA['] = ']]><process>url</process><![CDATA[';
]]>
</sitenode>

</WORKPLACE>
