<html>
    <head>
        <TITLE>Installation</TITLE>
    </head>
    <body>
        <p>
        <h1>Installation of OpenCms/Flex alpha 1</h1>
            
        This chapter provides information on how to install OpenCms using 
        <a href="http://jakarta.apache.org/tomcat/index.html">Tomcat</a> 
        and <a href="http://www.mysql.com">MySql</a>. All installation 
        parts are described as single steps. After completing a step you 
        are strongly advised to verify the success.
        </p>
                        
        <hr>

        <p>        
        <h2>1 Install the Java JDK</h2>
        Install Java JDK 1.3.x or later (from SUN <a href="http://java.sun.com/products/j2se/">http://java.sun.com/products/j2se/</a> or
        IBM <a href="http://www3.software.ibm.com">http://www3.software.ibm.com</a>).
        For details on how to install these components on your operating system,
        see the documentation that comes with them.
        The Java JDK 1.4 is supported in this release.
        </p>
        
        <hr>
        
        <p>
        <h2>2 Install Tomcat</h2>
        Note: OpenCms/Flex requires a Servlet 2.3 / JSP 1.2 standards compliant container.
        Tomcat 4 is the reference implementation of this Standard.
        Older versions of Tomcat do not support this standard and are thus not usable for OpenCms/Flex.
        </p>
        
        <p>
        Install Jakarta Tomcat 
        <a href="http://jakarta.apache.org/tomcat/index.html">http://jakarta.apache.org/tomcat/index.html</a>
        into a folder of your choice. This is the CATALINA_HOME folder. Don't forget to set the environment
        variables CATALINA_HOME and JAVA_HOME.
        </p>
        
        <p>
        Test the installation by running tomcat in standalone mode and check the examples. Note: Tomcat uses 
        port 8080 in standalone mode.
        </p>
        
        <p>
        If you wish you can combine the servlet-engine with a webserver like the Apache Web Server 
        <a href="http://www.apache.org/httpd.html">http://www.apache.org/httpd.html</a>.
        </p>
        
        <p>
        To make sure Tomcat works with the correct charset to read and write files you should add the following
        parameter to the commandline that is used to start Tomcat:        
        <code>-Dfile.encoding=ISO8859_1</code>        
        You can set the environment varibale CATALINA_OPTS to do so. (CATALINA_OPTS=-Dfile.encoding=ISO8859_1)
        
        </p>
        
        <hr>

        <p>        
        <h2>3 Install MySQL</h2>
        Install MySQL from <a href="http://www.mysql.com/downloads/index.html">http://www.mysql.com/downloads/index.html</a>
        (see the MySQL documentation on <a href="http://www.mysql.com/documentation/index.html">http://www.mysql.com/documentation/index.html</a>). 
        </p>
        
        <p>
        Note: On Windows-based systems MySQL has to be installed on the C:\ drive
        and should be registered as service using (your MySQL path)/mysql/bin/mysqld -install.
        </p>
        
        <p>
        Start the MySQL server by running the service (WIN32) or executing 
        (your MySQL path)/mysql/bin/mysqld (UNIX).
        </p>
        
        <p>
        Check that MySQL is running before you continue by starting the MySQL monitor 
        (command mysql in your MySQL bin folder).
        The database works correctly if a MySQL prompt appears after calling the monitor. 
        Quit the MySQL monitor by typing exit and go to the next step. 
        </p>
        
        <hr>
        
        <p>
        <h2>4 Deploy the opencms.war file</h2>
        Copy the opencms.war file from the binary distribution ZIP file to CATALINA_HOME/webapps/. Note: replace CATALINA_HOME
        with the real path to your Tomcat installation.
        </p>
        
        <p>
        (Re-)Start Tomcat. Tomcat will now deploy the web application OpenCms.
        </p>
        
        <hr>
        
        <p>
        <h2>5 Install OpenCms using the Setup-Wizard</h2>
        Start the Setup-Wizard by pointing your webbrowser to 
        <a href="http://localhost:8080/opencms/ocsetup">http://localhost:8080/opencms/ocsetup</a>.
        </p>
        
        <p>
        Note: Maybe you have to replace localhost with your servername. The port 8080 is only used if
        you start Tomcat in standalone mode.
        </p>
        
        <p>
        Follow the instructions of the OpenCms Setup-Wizard. It will set up the opencms database and
        import all workplace ressources into the system.
        </p>
        
        <p>
        For normal installations with MySql and Tomcat running on the same server all default settings
        will fit your needs.
        </p>
        
        <hr>
        
        <p>
        <h2>6 Now your system is ready</h2>
        Now your system is ready to use. You can login with user: Admin password: admin. Please change the
        password as soon as possible. The login URL of OpenCms is:
        <a href="http://localhost:8080/opencms/opencms/system/workplace/action/login.html">http://localhost:8080/opencms/opencms/system/workplace/action/login.html</a>
        </p>
        
        <hr>

        <h2>7 Import the Flex demo application</h2>

        <p>
        You should now import the OpenCms/Flex demo application which is contained in the binary as 
        well as in the source distribution of Flex.
        Go to the "Administration" view of the OpenCms Workplace.
        There select "Projectmanagement" followed by "New Project".
        Enter a name for your new project (e.g. "Offline") in the "Project Name" imput.
        Optionally, add a descriptive text in the "Description" area.
        Now click on each of the two folder icons (which brings up a file - tree selection window) and select "(Root Folder)"
        each time.
        After that, both the "Folders" as well as the "Channels" should have been set to "/".
        Leave everything else as it is and click "OK".
        OpenCms will now create this Project (called "Offline" in this example) and automatically switch to it.
        </p>

        <p>
        Now go back to the Administration overview (using the blue "Back" Arrow on the upper left of the screen).
        Click on "Database Management" followed by "Import". 
        In the upcoming dialog choose "Server" (the Flex demo application has been automatically copied to the
        servers import / export directory during the installation process).
        There should be a dropdown allowing you to choose "flex_alpha1_demo.zip".
        Select the file and click "OK".
        OpenCms will now start to import the Flex demo application.
        </p>

        <p>
        After the import has finished, you should click on the "Publish Project" icon (the "book" icon
        right to the "Project" dropdown on the upper screen) to publish your "Offline" project.
        After publishing has finished, select "Explorer" in the "View:" Dropdown from the upper screen.
        The Workplace will switch to the Explorer view.
        There will be a folder "/flexdemo" titled "Flex demo and test pages".
        Switch to that folder and click on the "index.html" there to see the Flex demo application welcome page.
        </p>
        
        <hr>

        <h2>8 Security issues</h2>
        
        <p>Finally after you have installed OpenCms and imported the Flex demo you should have a look at the security.
        Change the Admin password of OpenCms by calling the user preferences 
        ("hammer" icon on the main screen of the workplace). 
        Then you can add a password to the MySQL database. Enter the following commands 
        at the MySQL command line.<br> 
        
        <p>

        <BLOCKQUOTE>
        <pre>
use mysql;
insert into user values ('localhost', 'ocmsuser',
password('XXXXX'),'N','N','N','N','N','N','N','N','N',
'N','N','N','N','N'); 
insert into db values ('localhost', 'opencms42', 'ocmsuser',
'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y'); 
flush privileges; 
        </pre>
        </BLOCKQUOTE>
        
        <p>Don't forget to add the new user and password to all connect strings 
        of the database in your opencms.properties file. 
        The new user now can only connect to the OpenCms tables. 
        For more information see the MySQL documentation. 
        
    </body>
</html>
    