<html>
    <head>
        <TITLE>How to patch</TITLE>
    </head>
    <body>
        <p>
        <h1>How to patch OpenCms</h1>
            
        This chapter provides information on how to patch a running OpenCms
        Version 4.4.0 to version 4.4.1 without loosing any content in your VFS.
        For this you need an actual version of <a href="http://jakarta.apache.org/ant/">ant</a>. Maybe
        you can use the ant version that is shipped with your tomcat distribution by calling.
        </p>
        
        <p>
        You are strongly advised to make a backup copy of your web application and to dump your database content.
        </p>
                        
        <hr></hr>

        <p>
        <h2>1 Create backup of your web-application</h2>
        Create a copy of your web-application. You can find your web-application in
        <pre>TOMCAT_HOME/webapps/opencms</pre>
        </p>
        
        <hr></hr>
        
        <p>
        <h2>2 Create a dump of your database</h2>
        Create a dump of your database. For mysql-databases you can call the following command:<br>
        <pre>mysqdump opencms > dump.sql</pre>
        </p>
        
        <hr></hr>

        <p>
        <h2>3 Prepare</h2>
        The tool has the following defaults:<br>
        <ul>
            <li>The environment-variable TOMCAT_HOME is set to a proper value.</li>
            <li>Your application-name is opencms.</li>
            <li>The admin-user has the following password: admin</li>
        </ul>
        If these defaults are correct you can start to patch your system. Otherwise you 
        have to set some parameters to call the tool (see section 5).
        </p>
        
        <hr></hr>
        
        <p>
        <h2>4 Patch your OpenCms from 4.4.0 to 4.4.1</h2>
        Stop you servlet engine (e.g. tomcat stop). If you don't need to set parameters you can start 
        to patch OpenCms. Change to the directory you just have unzipped (patch_4.4.1). Call ant, 
        it uses the build.xml to patch OpenCms. After that you can start OpenCms again. 
        </p>
        
        <p>
        Now you should check if everything works fine. The title of the OpenCms login box tells you the
        actual version of OpenCms. Now it should be 4.4.1.        
        </p>

        <hr></hr>

        <p>
        <h2>5 Additional parameters to call ant</h2>
        You can set additional parameters to inform ant about changes to the default environment. To set an
        different TOMCAT_HOME folder you can call
        <pre>ant "-Dtomcat.home=value"</pre>
        Replace value with the absolute path to your TOMCAT_HOME folder.
        </p>
        
        <p>
        You can set a differen application name (if you have changed the name of the war-file):
        <pre>ant "-Dapp.name=value"</pre>
        </p>

        <p>
        You can set the password of the Admin-user. (You haven't set 'admin' any more?)
        <pre>ant "-Dadmin.password=value"</pre>
        </p>
        
        <p>
        You can set more than one parameter at one time. E.g:
        <pre>ant "-Dadmin.password=MyAdminPassword!" "-Dapp.name=supercms"</pre>
        </p>

</html>
