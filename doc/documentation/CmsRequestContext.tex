\begin{PRE}
All Packages  Class Hierarchy  This Package  Previous  Next  Index
\end{PRE}

\htmlHR

\section{  Class com.opencms.file.CmsRequestContext }

\begin{PRE}
com.opencms.file.CmsRequestContext
\end{PRE}

\htmlHR

\begin{description}
\item public class {\bf CmsRequestContext}  
\item implements I\_CmsConstants 
\end{description}

This class provides access to the CmsRequestContext. \htmlBR
In the CmsRequestContext class are all methods bundled, which can inform about
the current request properties, like the url or uri of the request. 

\begin{description}
\item {\bf Version:}  

\$Revision: 1.1 $ \$Date: 2001/07/31 12:25:45 $  
\item {\bf Author:}  

Andreas Schouten, Michael Emmerich, Anders Fugmann 
\end{description}

\htmlHR

\subsection*{  Variable Index }

\begin{description}
\item o {\bf m\_currentGroup}  

The current group of the user.  
\item o {\bf m\_currentProject}  

The current project.  
\item o {\bf m\_rb}  

The rb to get access to the OpenCms.  
\item o {\bf m\_req}  

The current CmsRequest.  
\item o {\bf m\_resp}  

The current CmsResponse.  
\item o {\bf m\_streaming}  

Is this response streaming?  
\item o {\bf m\_user}  

The current user. 
\end{description}

\subsection*{  Constructor Index }

\begin{description}
\item o {\bf CmsRequestContext}()  

The default constructor. 
\end{description}

\subsection*{  Method Index }

\begin{description}
\item o {\bf currentFolder}()  

Returns the current folder object.  
\item o {\bf currentGroup}()  

Returns the current group of the current user.  
\item o {\bf currentProject}()  

Returns the current project of the current user.  
\item o {\bf currentUser}()  

Returns the current user object.  
\item o {\bf getFileUri}()  

Gets the name of the requested file without any path-information.  
\item o {\bf getRequest}()  

Gets the current request, if availaible.  
\item o {\bf getResponse}()  

Gets the current response, if availaible.  
\item o {\bf getSession}(boolean)  

Gets the Session for this request.  
\item o {\bf getUri}()  

Gets the uri for the requested resource.  
\item o {\bf init}(I\_CmsResourceBroker, I\_CmsRequest, I\_CmsResponse,
String, String, int, boolean)  

Initializes this RequestContext.  
\item o {\bf isAdmin}()  

Determines if the users is in the admin-group.  
\item o {\bf isProjectManager}()  

Determines if the users current group is the projectmanager-group.  
\item o {\bf isStreaming}()  

Get the current mode for HTTP streaming.  
\item o {\bf setCurrentGroup}(String)  

Sets the current group of the current user.  
\item o {\bf setCurrentProject}(int)  

Sets the current project for the user.  
\item o {\bf setStreaming}(boolean)  

Set the current mode for HTTP streaming.

Calling this method is only allowed, if the response output stream was not
used before. 
\end{description}

\subsection*{  Variables }

o {\bf m\_rb} 

\begin{PRE}
 private I\_CmsResourceBroker m\_rb
\end{PRE}

\begin{description}
\htmlDD The rb to get access to the OpenCms.

\end{description}

o {\bf m\_req} 

\begin{PRE}
 private I\_CmsRequest m\_req
\end{PRE}

\begin{description}
\htmlDD The current CmsRequest.

\end{description}

o {\bf m\_resp} 

\begin{PRE}
 private I\_CmsResponse m\_resp
\end{PRE}

\begin{description}
\htmlDD The current CmsResponse.

\end{description}

o {\bf m\_user} 

\begin{PRE}
 private CmsUser m\_user
\end{PRE}

\begin{description}
\htmlDD The current user.

\end{description}

o {\bf m\_currentGroup} 

\begin{PRE}
 private CmsGroup m\_currentGroup
\end{PRE}

\begin{description}
\htmlDD The current group of the user.

\end{description}

o {\bf m\_currentProject} 

\begin{PRE}
 private CmsProject m\_currentProject
\end{PRE}

\begin{description}
\htmlDD The current project.

\end{description}

o {\bf m\_streaming} 

\begin{PRE}
 private boolean m\_streaming
\end{PRE}

\begin{description}
\htmlDD Is this response streaming?

\end{description}

\subsection*{  Constructors }

o {\bf CmsRequestContext} 

\begin{PRE}
 public CmsRequestContext()
\end{PRE}

\begin{description}
\htmlDD The default constructor. 

\end{description}

\subsection*{  Methods }

o {\bf currentFolder} 

\begin{PRE}
 public CmsFolder currentFolder() throws CmsException
\end{PRE}

\begin{description}
\htmlDD Returns the current folder object. 

\begin{description}
\item {\bf Returns:}  

the current folder object.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf currentGroup} 

\begin{PRE}
 public CmsGroup currentGroup()
\end{PRE}

\begin{description}
\htmlDD Returns the current group of the current user. 

\begin{description}
\item {\bf Returns:}  

the current group of the current user.  
\end{description}

\end{description}

o {\bf currentProject} 

\begin{PRE}
 public CmsProject currentProject()
\end{PRE}

\begin{description}
\htmlDD Returns the current project of the current user. 

\begin{description}
\item {\bf Returns:}  

the current project of the current user.  
\end{description}

\end{description}

o {\bf currentUser} 

\begin{PRE}
 public CmsUser currentUser()
\end{PRE}

\begin{description}
\htmlDD Returns the current user object. 

\begin{description}
\item {\bf Returns:}  

the current user object.  
\end{description}

\end{description}

o {\bf getFileUri} 

\begin{PRE}
 public String getFileUri()
\end{PRE}

\begin{description}
\htmlDD Gets the name of the requested file without any path-information. 

\begin{description}
\item {\bf Returns:}  

the requested filename.  
\end{description}

\end{description}

o {\bf getRequest} 

\begin{PRE}
 public I\_CmsRequest getRequest()
\end{PRE}

\begin{description}
\htmlDD Gets the current request, if availaible. 

\begin{description}
\item {\bf Returns:}  

the current request, if availaible.  
\end{description}

\end{description}

o {\bf getResponse} 

\begin{PRE}
 public I\_CmsResponse getResponse()
\end{PRE}

\begin{description}
\htmlDD Gets the current response, if availaible. 

\begin{description}
\item {\bf Returns:}  

the current response, if availaible.  
\end{description}

\end{description}

o {\bf getSession} 

\begin{PRE}
 public I\_CmsSession getSession(boolean value)
\end{PRE}

\begin{description}
\htmlDD Gets the Session for this request. \htmlBR
This method should be used instead of the originalRequest.getSession() method.


\begin{description}
\item {\bf Parameters:}  

value - indicates, if a session should be created when a session for the
particular client does not already exist.  
\item {\bf Returns:}  

the CmsSession, or {\tt null} if no session already exists and value was set
to {\tt false}  
\end{description}

\end{description}

o {\bf getUri} 

\begin{PRE}
 public String getUri()
\end{PRE}

\begin{description}
\htmlDD Gets the uri for the requested resource. 

For a http request, the name of the resource is extracted as follows:\htmlBR
{\tt http://\{servername\}/\{servletpath\}/\{path to the cms
resource\}}\htmlBR
In the following example:\htmlBR
{\tt http://my.work.server/servlet/opencms/system/def/explorer}\htmlBR
the requested resource is {\tt /system/def/explorer}. 

\begin{description}
\item {\bf Returns:}  

the path to the requested resource.  
\end{description}

\end{description}

o {\bf init} 

\begin{PRE}
 void init(I\_CmsResourceBroker rb,
           I\_CmsRequest req,
           I\_CmsResponse resp,
           String user,
           String currentGroup,
           int currentProjectId,
           boolean streaming) throws CmsException
\end{PRE}

\begin{description}
\htmlDD Initializes this RequestContext. 

\begin{description}
\item {\bf Parameters:}  

req - the CmsRequest.  

resp - the CmsResponse.  

user - the current user for this request.  

currentGroup - the current group for this request.  

currentProjectId - the id of the current project for this request.  

streaming - {\tt true} if streaming should be enabled for this response, {\tt
false} otherwise.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf isAdmin} 

\begin{PRE}
 public boolean isAdmin() throws CmsException
\end{PRE}

\begin{description}
\htmlDD Determines if the users is in the admin-group. 

\begin{description}
\item {\bf Returns:}  

{\tt true} if the users current group is the admin-group; {\tt false}
otherwise.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf isProjectManager} 

\begin{PRE}
 public boolean isProjectManager() throws CmsException
\end{PRE}

\begin{description}
\htmlDD Determines if the users current group is the projectmanager-group.
\htmlBR
All projectmanagers can create new projects, or close their own projects. 

\begin{description}
\item {\bf Returns:}  

{\tt true} if the users current group is the projectleader-group; {\tt false}
otherwise.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf setCurrentGroup} 

\begin{PRE}
 public void setCurrentGroup(String groupname) throws CmsException
\end{PRE}

\begin{description}
\htmlDD Sets the current group of the current user. 

\begin{description}
\item {\bf Parameters:}  

groupname - the name of the group to be set as current group.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf setCurrentProject} 

\begin{PRE}
 public CmsProject setCurrentProject(int projectId) throws CmsException
\end{PRE}

\begin{description}
\htmlDD Sets the current project for the user. 

\begin{description}
\item {\bf Parameters:}  

projectId - the id of the project to be set as current project.  
\item {\bf Throws:} CmsException  

if operation was not successful.  
\end{description}

\end{description}

o {\bf isStreaming} 

\begin{PRE}
 public boolean isStreaming()
\end{PRE}

\begin{description}
\htmlDD Get the current mode for HTTP streaming. 

\begin{description}
\item {\bf Returns:}  

{\tt true} if template classes are allowed to stream the  results to the
response output stream theirselves, {\tt false} otherwise.  
\end{description}

\end{description}

o {\bf setStreaming} 

\begin{PRE}
 public void setStreaming(boolean b) throws CmsException
\end{PRE}

\begin{description}
\htmlDD Set the current mode for HTTP streaming.

Calling this method is only allowed, if the response output stream was not
used before. Otherwise the streaming mode must not be changed. 

\begin{description}
\item {\bf Parameters:}  

b - {\tt true} if template classes are allowed to stream the  results to the
response's output stream theirselves, {\tt false} otherwise.  
\item {\bf Throws:} CmsException  

if the output stream was already used previously.  
\end{description}

\end{description}

\htmlHR

\begin{PRE}
All Packages  Class Hierarchy  This Package  Previous  Next  Index
\end{PRE}

