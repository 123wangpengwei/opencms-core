/*
 * File   : $Source: /alkacon/cvs/opencms/Attic/todo.txt,v $
 * Date   : $Date: 2002/12/13 17:43:18 $
 * Version: $Revision: 1.11 $
 *
 * This file is part of OpenCms -
 * the Open Source Content Mananagement System
 *
 * Copyright (C) 2002  The OpenCms Group
 */

TODO Items for OpenCms Release 5.0.

This document serves as a base for discussion on what features should
be included in the next release of OpenCms.

Everyone is invited to make suggestions to this list, please use the
opencms-dev mailing list at www.opencms.org to do so.

Legend:
+ Decision: Feature will be implemented in the next release
d Decision: Feature will be implemented, but implementation is delayed beyond next release
- Decision: Feature will NOT be implemented
? No desicion made about this feature
# Feature has already been implemented

As a small rule, there can be only a decision to implement a feature if there is
also a volunteer to do the work!


[ # ] Static export of JSP files
================================================================================
Suggested by:
    Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  JSP pages in OpenCms should be statically exportable just like
  other pages, using the "export" and "exportname" properties.

Issues:
  The way the static export is implemented you don't have a
  HttpRequest / HttpResponse available which is required in order
  to get a request diapatcher to include() the JSP.
  I will work around that by generating a http request and
  save the results. This requires some tricky dealing with the "mode"
  of the CmsObject, which (hopefully) should be solveable.

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)

Updates:
  (12/06/02) Alexander Kandzior
  Finished implementing a working version.
  Some issues with the static export have been decteded in the process,
  which are unrelated to the JSP export because they also occur in
  no-JSP (ie. XMLTemplate only) scenarios.


[ # ] Consolidate top-level directories
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  Even in an empty OpenCms installation, there are a lot of default directories
  in the root folder ("/"). This confuses users, esp. when one starts to
  add his own directories, since it might not be clear which directory
  belongs to the application, and which is just a default directory with
  some special system function. The suggestion is to move all the default
  directories below the "/system" folder.

  The current folder structure of a fres OpenCms installation looks like this:

  /content
  /download
  /externallinks
  /htmlgalleries
  /moduledemos
  /pics/system
  /system

  All above directories are only needed for special system purposes.
  This new folder structure would achive the same result, but without
  clustering the root folder:

  /system (remains)
  /system/bodies (former /content/bodys)
  /system/galleries/download (former /download)
  /system/galleries/externallinks (former /externallinks)
  /system/galleries/htmlgalleries (former /htmlgalleries)
  /system/moduledemos (former /moduledemos)
  /system/pics (former /pics/system)
  /system/modules/default (former /content directory without /content/bodys)
  [other directories already below /system remain]

Issues:
   This changes require re-coding a lot of path information that might
   be clustered in the Java sources and the workplace files.
   Esp. moving /content to /system/content might be difficult because
   of the XMLTemplate mechanism.

   Also important is to have a mechanism to update a running system
   using the old structure to the new structure.

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)

Updates:
  (08/26/02) Alexander Kandzior:
  I updated several Workplace files that used hard - coded path information
  to use constants from com.opencms.workplace.I_CmsWpConstants instead. It's now
  possible to move the "/content" directory in a fresh installation below
  "/system" by just changing the constants in I_CmsWpConstants, recompiling,
  installing the new JAR and moving the directories to the new locations in
  the wrokplace (see above).
  I assume moving most of the galleries would no be to difficult either.
  Changing the "/pics" path requires a lot of search and replace in existing
  templates, but should be doable in an acceptable time frame. The true issue is
  finding a way to migrate an old system to the new structure.
  (08/31/02) Alexander Kandzior
  To overcome the issue of a system upgrade from the old to the new structure,
  two methods have been discussed:
  1. Write a tool that automatically analyzes and rewrites the content of pages.
  2. Write some kind of "directory mapping"
  M.E. will have to write a tool for the content transition anyway because of
  issues with the i18n (see below). He will try to add directory translation
  to it.
  A.K. will try to devise a way to write a directory mapping wich will be
  configured in the registry.xml, probably using regular expressions. This
  mapping will be optional.
  Even with this efforts it is still unclear if the new directory structure
  will make it to the final release.
  (10/16/02) Alexander Kandzior
  Directroy translation (i.e "mapping") is in place now.
  You can use regular expressions in opencms.properties to set the translations.
  Galleries have been modified on a single codebase and can now easily switched
  from old to new directory mapping using constants in I_CmsWpConstants.
  (10/29/02) Alexander Kandzior
  The tool idea for the import was dropped because the translation works
  well and noone seems to have the time to implement the translation tool.


[ d ] Logfile rotation
================================================================================
Suggested by:
  Andreas Schouten (andreas.schouten@framfab.de)

Description:
  The OpenCms logfile just grows and grows. Logfile rotation would help
  keep the filesize reasonable.

Issues:
    None known. Someone has to do the work.

Volunteers:
  (No volunteer yet)


[ d ] Native support for Velocity templates
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  Thanks to contributions from the community, there is now a Velocity
  template extension for OpenCms available. Based on this work,
  Velocity support should be extended to be natively included in the
  standard release. In short, there should be a "Velocity Template" option
  on the "Add new" dialog in the OpenCms workplace.

Issues:
  Adding a new resource type in OpenCms is tricky. Also, there must be a way devised
  that binds the Velocity template to a corrosponding Velocity class.

Volunteers:
  (No volunteer yet)


[ d ] Check for old, unused template files in "/system/workplace" folders
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  There are many files in "/system/workplace" folders. Some of them seem to
  be unused. This should be checked and unused files should be removed.

Issues:
  None known. Someone has to do the work.

Volunteers:
  (No volunteer yet)


[ # ] Support for MS-SQL Server in setup wizard
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  There is now a native MS-SQL Server resource broker available.
  This should be selectable during installation with the wizard.
  Currently the opencms.properties file must be edited to enable MS-SQL
  server support, which is difficult to impossible for new users who want
  to try our OpenCms on their system.

Issues:
  None known. Someone has to do the work.

Volunteers:
  Edna Falkenhahn (edna.falkenhahn@framfab.de)


[ # ] Create a default "Offline" project during installation
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  Currently, the user must first create a project after installation to be able
  to make any changes. There should be a default "Offline" project that is
  created during the installation, so that a new user can start checking out
  the system right away. This default "Offline" project should be just a normal
  project, so it can be deleted if not wanted. This change would help new users
  to get started with OpenCms more easily.

Issues:
  None known.
  Todo: Include all Channels (Root Channel) when generating default "Offline" project

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)


[ # ] Create a default /index.html page during installation
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  If you setup opencms for the first time, accessing the front end will
  produce a 404 error since there is no default "/index.html" installed.
  Other systems (like Tomcat, Apache webserver etc.) feature at least a page
  that says "The system was successfully insalled". Such a page shold be
  added to a new installation of OpenCms.

Issues:
  None known.

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)


[ # ] Rename "uk" locale to "en"
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  The locale for english language for some obscure reason is "uk", while
  the international standard is "en". Rename local and language files to "en"

Issues:
  Make sure old modules that still use "uk" locale are still running.

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)

Updates:
  (08/31/02) Alexander Kandzior
  Should be working now.
  You must rename the "uk" directories to "en" (esp. in old modules).
  New modules are created only with the default language directory now,
  which also is "en". Create other directories manually if needed.


[ # ] Add i18n changes to release version
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  There has been a great contribution from Gridnine systems to better support
  i18n in the OpenCms XML process. This changes should be part of the next
  major release.

  As a side effect, these changes might also cause OpenCms to work with the
  Java 1.4 default XML parser. In this case a seperate Xerces jar would not
  longer be needed, reducing a lot of installation issues. This should
  be verified.

Issues:
  Make sure the changes have no side - effect on the rest of the system.

Volunteers:
  Michael Emmerich (Michael.Emmerich@framfab.de)

Updates:
  (08/26/02) Michael Emmerich:
  Integration of Gridnine code so far has been successful.
  Some issues regarding German umlauts have been resolved in latest code
  version from Gridnine. Test have been succesful so for.
  Some changes to new "content-encoding" property still needed.
  After final test have been made the code will be merged into the 5.0 branch.

  Other comments for this release:
  Features:
  Workplace is converted to UTF-8 encoding.

  New variable in opencms.properties file: defaultContentEncoding -
  sets the default encoding of the pages.

  New property "content-encoding" of the page is added. Content-encoding
  property sets the encoding of the specific page. If not specified the
  defaultContentEncoding from opencms.properties file will be used.

  New user method getEncoding() in order to insert in XML templates
  (<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=]]><METHOD
  name="getEncoding"/><![CDATA[">)

  Property_value field in all *_properties tables is changed to TEXT from
  VARCHAR(255) in MySQL database. This change is required since now properties
  are url-encoded to avoid Unicode problem (MySQL doesn't support Unicode yet).
  Therefore the length of the property string is bigger and it is not enough to
  have 255 characters. Attention: Developers shouldn't use ORDER BY clause in
  SQL statements since it will be not Unicode sort order but url-encoded
  sorting. There are no ORDER BY clauses for property_value in the current code.

  Known issues:
  Change property_value field in all *_properties tables for supported databases.
  If database supports Unicode property_value should not be url-encoded.
  For example it is possible to use nvarchar(4000) in SQL Server. It is better
  to use more then 255 symbols since there is always need for more characters
  (description, keywords, etc)

  Netscape Navigator 6.2 doesn't show the
  "Code editor" page properly. We are working on this now.

  (08/30/02) Michael Emmerich
  Most issues have been solved.

  Special characters (Umlaute etc.) still cause problems in the registry.xml
  (when used e.g. in module parameters). Also importing content of a previous
  version might cause problems with special characters in the WYSIWYG.


[ ? ] English help file translations
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  The help files are available only in German language.
  They must be made available in English for international users.
  Other languages (eg. Italian) would also be great.

Issues:
  Find someone who translates the content.
  Also, the selection mechanism for the help language must be checked and
  perhaps adjusted to support more then one language. Moreover, all files
  currently have German names. To make translation easier and to be more
  consistent, the names of the help files should be changed to english. This
  in turn requires changing the reference to the helpfiles in all workplace
  files.

Volunteers:
  Massimiliano Alessandri (m.alessandri@tiscali.it)
  Mark Foley (mfoley5@csc.com.au)

Updates:
  (08/26/02) Alexander Kandzior:
  Massimiliano Alessandri from Italy has volunteerd to do an Italian translation
  after an english translation is available.
  (10/29/02) Mark Foley
  Despite promising this for quite a while without delivering,
  I have finally got some real time to address this properly.
  We have a firm delivery date for a client so this means the translation
  will be completed within the next two weeks.  I will be forwarding my translation
  to the OpenCms group who will be able to roll it into a future release (I hope).


[ # ] Import tool for content of pre 5.0 releases.
================================================================================
Suggested by:
  Michael Emmerich (Michael.Emmerich@framfab.de)

Description:
  The changes in the handling of the character encoding (see below)
  cause XMLTemplates of version before 5.0 to not be importable in the 5.0 release.
  This means migrating from 4.x to 5.0 currently does not easily work.

  Reason is the old templates do not specify the encoding.
  Most templates and other XML files (e.g. those created with the "page"
  editor) start with the line

  <?xml version="1.0">

  this has to be replaced by

  <?xml version="1.0" encoding="UTF-8"?> or
  <?xml version="1.0" encoding="ISO-8859-1"?>

  or any other encoding you might use. Currently a manual search and
  replace must be done like this:

  1. Unpack the OpenCms export zip
  2. Look for all XMlTemplates where the encoding is not specified
  3. Add the encoding like in the examples above
  4. Zip the files again (leave the file structure as it was)
  5. Import the zip with the modified templates

  This should do the trick.
  For the 5.0 we will have a mechanism that detects "old style" exports
  and does this automatically on the fly.

Issues:
    None known. Someone has to do the work.

Volunteers:
  Andreas Schouten (andreas.schouten@framfab.de)
  Michael Emmerich (Michael.Emmerich@framfab.de)


[ ? ] Cleanup / Minor points
================================================================================
Suggested by:
  Alexander Kandzior (a.kandzior@alkacon.com)

Description:
  Some minor issues that could/should be improved and fixed
   1. ? Improved temp-file handling, no more "dead" files like ~page1.html
   2. # Reports do not always scroll right while exporting/publishing
   3. # Add reports to module export/import (don't use System.out here)
   4. # Check new link dialog in HTML editor for handling of filename parameters
   5. ? Make help files a module and an optional part of the installation
   6. # Add posibility to "lock" the workplace to one language
   7. # Add a feature "remove help button for languages where no help is available"

Issues:
    None known. Someone has to do the work.

Volunteers:
  Alexander Kandzior (a.kandzior@alkacon.com)

Updates:
  (11/11/02) Alexander Kandzior
  I will see what I can do before the 5.0 final is released.
  None of the bullets seems to be critical enough to
  prevent the release, though.
  (12/06/02) Alexander Kandzior
  Feature 6 + 7 have been implemented.
  (12/13/02) Alexander Kandzior
  Point 2 + 3 have been fixed / implemented
  Tried to fix point 4, the issue is not related to the
  link dialog but to the MS DHTML edit control in general, no easy fix was found

